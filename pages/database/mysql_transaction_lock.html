<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../layui-2.6.8/css/layui.css">
    <script src="../../layui-2.6.8/layui.js"></script>

    <script src="../../highlight/highlight.min.js"></script>
    <link rel="stylesheet" href="../../highlight/styles/base16/atelier-cave.min.css">
    <script>hljs.highlightAll();</script>
</head>
<body>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>事务与锁</legend>
</fieldset>
<div class="layui-collapse">

    <div class="layui-colla-item">
        <h2 class="layui-colla-title">MVCC与提交读，可重复读</h2>
        <div class="layui-colla-content layui-show">
<pre>
<span style="color: red">并发控制的原理</span>：多个线程读取时，即使遇到互斥锁，也可以去读undo日志

<span style="color: red">这也是实现提交读和可重复读的关键区别</span>：
read-commited读的总是历史版本中的最新版本，所以避免了脏读，但是无法重复读。
repeatable-read读的是事务开启时的那一份版本，所以可以重复读。
</pre>
        </div>
    </div>

    <div class="layui-colla-item">
        <h2 class="layui-colla-title">间隙锁解决幻读</h2>
        <div class="layui-colla-content layui-show">
<pre>
间隙锁：不止锁住了该行记录，还锁住了一定范围。
</pre>
        </div>
    </div>

    <div class="layui-colla-item">
        <h2 class="layui-colla-title">获取锁超时</h2>
        <div class="layui-colla-content layui-show">
<pre>
innodb_lock_wait_timeout，设置获取锁超时时间
innodb_rollback_on_timeout，默认OFF不回滚
</pre>
        </div>
    </div>
</div>
</body>
</html>
